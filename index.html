           <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEPS 9A Mega</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeInUp 0.4s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .chat-bubble { border-radius: 18px; padding: 10px 14px; margin-bottom: 8px; max-width: 85%; }
    </style>
</head>
<body class="bg-slate-100 font-sans antialiased text-slate-900">

    <div class="max-w-md mx-auto min-h-screen bg-white shadow-2xl flex flex-col relative overflow-hidden">
        
        <!-- HEADER -->
        <header class="p-5 bg-white border-b flex justify-between items-center sticky top-0 z-50">
            <div>
                <h1 class="text-xl font-black text-indigo-600 italic tracking-tighter">NEPS 9A</h1>
                <p id="role-text" class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">Student Portal</p>
            </div>
            <button onclick="unlockTeacher()" class="w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center text-slate-400 active:bg-indigo-600 active:text-white transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
            </button>
        </header>

        <main class="flex-1 overflow-y-auto pb-24">
            
            <!-- HOME TAB -->
            <div id="home-tab" class="tab-content active p-6 space-y-6">
                <div class="bg-gradient-to-br from-indigo-600 to-blue-700 p-8 rounded-[40px] text-white shadow-xl relative overflow-hidden">
                    <h2 class="text-2xl font-black italic">Welcome, Scholar</h2>
                    <p class="text-indigo-100 text-[10px] font-bold uppercase mt-1">Class 9A Hub</p>
                </div>

                <div class="space-y-3">
                    <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest px-2">Live Allotments</h3>
                    <div id="allotment-list" class="space-y-3">
                        <div class="text-center py-4 text-slate-400 text-[10px] font-bold animate-pulse">Syncing Assignments...</div>
                    </div>
                </div>

                <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest px-2">6 Main Subjects</h3>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-white p-4 rounded-[25px] border border-slate-100 shadow-sm flex flex-col items-center">
                        <div class="bg-orange-500 w-10 h-10 rounded-xl flex items-center justify-center text-white mb-2">üìê</div>
                        <span class="font-black text-[9px] uppercase">Maths</span>
                    </div>
                    <div class="bg-white p-4 rounded-[25px] border border-slate-100 shadow-sm flex flex-col items-center">
                        <div class="bg-emerald-500 w-10 h-10 rounded-xl flex items-center justify-center text-white mb-2">üß™</div>
                        <span class="font-black text-[9px] uppercase">Science</span>
                    </div>
                    <div class="bg-white p-4 rounded-[25px] border border-slate-100 shadow-sm flex flex-col items-center">
                        <div class="bg-amber-700 w-10 h-10 rounded-xl flex items-center justify-center text-white mb-2">üìú</div>
                        <span class="font-black text-[9px] uppercase">SST</span>
                    </div>
                    <div class="bg-white p-4 rounded-[25px] border border-slate-100 shadow-sm flex flex-col items-center">
                        <div class="bg-blue-600 w-10 h-10 rounded-xl flex items-center justify-center text-white mb-2">üìñ</div>
                        <span class="font-black text-[9px] uppercase">English</span>
                    </div>
                    <div class="bg-white p-4 rounded-[25px] border border-slate-100 shadow-sm flex flex-col items-center">
                        <div class="bg-rose-600 w-10 h-10 rounded-xl flex items-center justify-center text-white mb-2">üáÆüá≥</div>
                        <span class="font-black text-[9px] uppercase">Hindi</span>
                    </div>
                    <div class="bg-white p-4 rounded-[25px] border border-slate-100 shadow-sm flex flex-col items-center">
                        <div class="bg-indigo-700 w-10 h-10 rounded-xl flex items-center justify-center text-white mb-2">üíª</div>
                        <span class="font-black text-[9px] uppercase">Comp</span>
                    </div>
                </div>
            </div>

            <!-- CHAT TAB -->
            <div id="chat-tab" class="tab-content flex flex-col h-[75vh]">
                <div id="chat-messages" class="flex-1 p-5 overflow-y-auto flex flex-col space-y-3">
                    <!-- Cloud Messages -->
                </div>
                <div class="p-4 bg-white border-t flex gap-2 sticky bottom-0">
                    <input id="chat-input" type="text" placeholder="Write to class..." class="flex-1 bg-slate-100 rounded-xl px-4 py-3 text-sm outline-none">
                    <button onclick="sendMsg()" class="bg-indigo-600 text-white p-3 rounded-xl shadow-lg active:scale-90">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                    </button>
                </div>
            </div>

            <!-- LEADERBOARD TAB -->
            <div id="leader-tab" class="tab-content p-6 space-y-4">
                <div class="bg-slate-900 p-6 rounded-[30px] text-white">
                    <h2 class="text-xl font-black italic">Leaderboard</h2>
                </div>
                <div class="bg-white rounded-[30px] border border-slate-100 p-2 space-y-1">
                    <div class="flex items-center justify-between p-4 bg-yellow-50 rounded-[20px]">
                        <span class="font-black text-sm">1. Aryan Singh</span>
                        <span class="text-xs font-black text-yellow-600">2,850 XP</span>
                    </div>
                    <div class="flex items-center justify-between p-4">
                        <span class="font-bold text-sm">2. Priya Sharma</span>
                        <span class="text-xs font-bold text-slate-400">2,400 XP</span>
                    </div>
                </div>
            </div>

            <!-- TEACHER TAB -->
            <div id="teacher-tab" class="tab-content p-6 space-y-6">
                <div class="bg-red-600 p-8 rounded-[40px] text-white shadow-xl">
                    <h2 class="text-2xl font-black italic">Teacher Allot</h2>
                </div>
                <div class="bg-white p-6 rounded-[35px] border border-slate-100 space-y-4 shadow-sm">
                    <select id="t-sub" class="w-full bg-slate-50 p-4 rounded-2xl outline-none font-bold text-sm border-none">
                        <option>Maths</option><option>Science</option><option>SST</option><option>English</option><option>Hindi</option><option>Computer</option>
                    </select>
                    <textarea id="t-info" rows="3" placeholder="Task details..." class="w-full bg-slate-50 p-4 rounded-2xl outline-none font-bold text-sm"></textarea>
                    <button onclick="publishToCloud()" id="pub-btn" class="w-full bg-slate-900 text-white py-5 rounded-[25px] font-black uppercase text-[10px] tracking-widest active:scale-95 transition-all">
                        Post Live Assignment
                    </button>
                </div>
            </div>

        </main>

        <!-- BOTTOM NAV -->
        <nav class="p-4 bg-white border-t flex justify-around items-center fixed bottom-0 left-0 right-0 max-w-md mx-auto z-50">
            <button onclick="switchTab('home')" class="nav-btn text-indigo-600"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></button>
            <button onclick="switchTab('leader')" class="nav-btn text-slate-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg></button>
            <button onclick="switchTab('chat')" class="nav-btn text-slate-300"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button>
            <button id="t-nav" onclick="switchTab('teacher')" class="nav-btn text-slate-300 hidden"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg></button>
        </nav>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'neps-9a-mega';

        async function init() {
            await signInAnonymously(auth);
            syncContent();
        }

        function syncContent() {
            // SYNC ASSIGNMENTS
            onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'allotments'), (snap) => {
                const list = document.getElementById('allotment-list');
                list.innerHTML = "";
                snap.docs.forEach(doc => {
                    const data = doc.data();
                    const el = document.createElement('div');
                    el.className = "bg-indigo-50 border border-indigo-100 p-4 rounded-[25px] flex items-start gap-4";
                    el.innerHTML = `<div class="bg-indigo-600 text-white p-2 rounded-xl text-xs">üìù</div><div><p class="text-[9px] font-black text-indigo-600 uppercase">${data.subject}</p><p class="text-xs font-bold text-slate-700">${data.info}</p></div>`;
                    list.prepend(el);
                });
            });

            // SYNC CHAT
            onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'chat'), (snap) => {
                const chat = document.getElementById('chat-messages');
                chat.innerHTML = "";
                snap.docs.forEach(doc => {
                    const data = doc.data();
                    const m = document.createElement('div');
                    m.className = "chat-bubble bg-white border border-slate-100 text-slate-700 self-start text-xs shadow-sm";
                    m.innerText = data.text;
                    chat.appendChild(m);
                });
                chat.scrollTop = chat.scrollHeight;
            });
        }

        window.publishToCloud = async () => {
            const sub = document.getElementById('t-sub').value;
            const info = document.getElementById('t-info').value;
            if(!info) return;
            const btn = document.getElementById('pub-btn');
            btn.innerText = "Syncing...";
            await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'allotments'), { subject: sub, info: info, time: serverTimestamp() });
            btn.innerText = "Post Live Assignment";
            document.getElementById('t-info').value = "";
            switchTab('home');
        };

        window.sendMsg = async () => {
            const input = document.getElementById('chat-input');
            if(!input.value) return;
            await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'chat'), { text: input.value, time: serverTimestamp() });
            input.value = "";
        };

        window.switchTab = (id) => {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id + '-tab').classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.replace('text-indigo-600', 'text-slate-300'));
        };

        window.unlockTeacher = () => {
            const pin = prompt("Teacher PIN (1234):");
            if(pin === "1234") {
                document.getElementById('t-nav').classList.remove('hidden');
                document.getElementById('role-text').innerText = "Administrator Mode";
                switchTab('teacher');
            }
        };

        init();
    </script>
</body>
</html>

 
